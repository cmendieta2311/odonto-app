<div class="space-y-6">
    <!-- Header / Actions -->
    <div class="flex items-center justify-between">
        <h3 class="text-base font-bold text-slate-800 dark:text-white flex items-center gap-2">
            <span class="material-symbols-outlined text-slate-400">folder</span>
            Archivos Adjuntos ({{ files.length }})
        </h3>
        <div>
            <input type="file" #fileInput class="hidden" (change)="onFileSelected($event)" multiple>
            <button (click)="fileInput.click()"
                class="px-4 py-2 rounded-lg bg-teal-500 hover:bg-teal-600 text-white font-bold text-sm transition-colors shadow-sm flex items-center gap-2">
                <span class="material-symbols-outlined text-[20px]">upload_file</span>
                Subir Archivo
            </button>
        </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="files.length === 0"
        class="text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-xl border-2 border-dashed border-slate-200 dark:border-slate-700">
        <span class="material-symbols-outlined text-4xl text-slate-300 dark:text-slate-600 mb-2">folder_off</span>
        <p class="text-slate-500 dark:text-slate-400 font-medium">No hay archivos adjuntos</p>
    </div>

    <!-- Files Grid -->
    <div *ngIf="files.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div *ngFor="let file of files"
            class="group bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-slate-800 p-4 hover:border-teal-500/50 hover:shadow-md transition-all relative">

            <div class="flex items-start gap-3">
                <!-- Icon based on type -->
                <div class="size-10 rounded-lg flex items-center justify-center shrink-0" [ngClass]="{
                        'bg-red-50 text-red-500': file.type.includes('pdf'),
                        'bg-blue-50 text-blue-500': file.type.includes('image'),
                        'bg-slate-100 text-slate-500': !file.type.includes('pdf') && !file.type.includes('image')
                    }">
                    <span class="material-symbols-outlined" *ngIf="file.type.includes('pdf')">picture_as_pdf</span>
                    <span class="material-symbols-outlined" *ngIf="file.type.includes('image')">image</span>
                    <span class="material-symbols-outlined"
                        *ngIf="!file.type.includes('pdf') && !file.type.includes('image')">description</span>
                </div>

                <div class="flex-1 min-w-0">
                    <p class="text-sm font-bold text-slate-900 dark:text-white truncate" title="{{ file.name }}">{{
                        file.name }}</p>
                    <div class="flex items-center gap-2 mt-1 text-xs text-slate-500">
                        <span>{{ file.size }}</span>
                        <span class="w-1 h-1 rounded-full bg-slate-300"></span>
                        <span>{{ file.uploadDate | date:'dd MMM yyyy' }}</span>
                    </div>
                </div>

                <button (click)="deleteFile(file.id)"
                    class="opacity-0 group-hover:opacity-100 p-1.5 rounded-lg hover:bg-red-50 text-slate-400 hover:text-red-500 transition-all">
                    <span class="material-symbols-outlined text-[18px]">delete</span>
                </button>
            </div>
        </div>
    </div>
</div>